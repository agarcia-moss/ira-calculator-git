appId: com.ira.calculator
productName: IRA Calculator
copyright: Copyright Â© ${year} ${author}

directories:
  output: dist
  buildResources: build

# Include version in artifact names
artifactName: ${productName}-${version}-${os}-${arch}.${ext}

# Files to include in the build
files:
  - build/**/*
  - "!build/static/js/*.map"
  - "!build/static/css/*.map"
  - public/electron.js
  - public/preload.js
  - public/transparent_moss.png
  - app-update.yml
  - node_modules/electron-log/**/*
  - node_modules/electron-updater/**/*

asar: true
asarUnpack:
  - "**/*.node"

# macOS specific
mac:
  category: public.app-category.productivity
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  target:
    - target: dmg
      arch:
        - x64
        - arm64
    - target: zip
      arch:
        - x64
        - arm64

# Windows specific
win:
  target:
    - target: nsis
      arch:
        - x64
        - ia32
    - target: portable
      arch:
        - x64

nsis:
  oneClick: false
  perMachine: false
  allowElevation: true
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  deleteAppDataOnUninstall: false
  artifactName: ${productName} Setup ${version}.${ext}
  shortcutName: IRA Calculator
  uninstallDisplayName: IRA Calculator
  license: LICENSE

portable:
  artifactName: ${productName} ${version} Portable.${ext}

# Linux specific
linux:
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64
    - target: rpm
      arch:
        - x64
  category: Office
  synopsis: IRA Calculator for Apprenticeship Program
  description: A comprehensive calculator for IRA apprenticeship programs
  desktop:
    StartupNotify: true

appImage:
  artifactName: ${productName}-${version}.${ext}
  license: LICENSE

# Auto-update configuration
publish:
  - provider: github
    owner: agarcia-moss
    repo: ira-calculator-git
    releaseType: release
    private: false

# Code signing (optional - requires certificates)
# mac:
#   identity: "Developer ID Application: Your Name (XXXXXXXXXX)"
#   notarize:
#     appleId: your-apple-id@example.com
#     appleIdPassword: "@keychain:AC_PASSWORD"
#     teamId: XXXXXXXXXX

# win:
#   certificateFile: path/to/certificate.pfx
#   certificatePassword: ${env.CERTIFICATE_PASSWORD}
